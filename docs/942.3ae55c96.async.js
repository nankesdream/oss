(function(){var I={6070:function(u,v,f){"use strict";f.d(v,{V:function(){return x}});var F=f(54375),h=f(15009),c=f.n(h),w=f(99289),y=f.n(w),T=f(12444),k=f.n(T),z=f(72004),A=f.n(z),K=f(9783),d=f.n(K),M=f(26657),X=f.n(M),Z=function(){function e(){k()(this,e)}return A()(e,null,[{key:"getTimeString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"now",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"yyyy-MM-dd HH:mm:ss.SSS",s;return n=="now"?s=new Date:s=new Date(n),s.format(a)}},{key:"getTimestamp",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"now";return n=="now"?new Date().getTime():(n=n.substring(0,19),n=n.replace(/-/g,"/"),new Date(n).getTime())}}]),e}();Date.prototype.format=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"yyyy-MM-dd HH:mm:ss.SSS",t={"y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()},n=function(){var r="00"+t[a],i=new RegExp("(".concat(a,")"));e=e.replace(i,function(l,m){return r.substring(r.length-m.length)})};for(var a in t)n();return e};var V=function(){function e(){k()(this,e),d()(this,"queue",void 0),d()(this,"running",void 0),this.queue=[],this.running=!1}return A()(e,[{key:"addTask",value:function(n){this.queue.push(n),this.running||this.runNextTask()}},{key:"runNextTask",value:function(){var t=y()(c()().mark(function a(){var s;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.queue.length!==0){i.next=3;break}return this.running=!1,i.abrupt("return");case 3:return this.running=!0,s=this.queue.shift(),i.prev=5,i.next=8,s();case 8:i.next=13;break;case 10:i.prev=10,i.t0=i.catch(5),console.error("\u4EFB\u52A1\u6267\u884C\u5931\u8D25:",i.t0);case 13:this.runNextTask();case 14:case"end":return i.stop()}},a,this,[[5,10]])}));function n(){return t.apply(this,arguments)}return n}()}]),e}(),_=f(64599),ee=f.n(_),te=f(52677),C=f.n(te),$=new WeakMap;function L(e){if(C()(e)!="object")return e;var t=$.get(e);if(t)return t;var n={get:function(r,i){return ae(r,i),C()(r[i])==="object"&&r[i]!==null?L(r[i]):Reflect.get(r,i)},set:function(r,i,l,m){var p=r[i],g=Reflect.set(r,i,l,m);return p!=l&&fe(r,i),g}},a=new Proxy(e,n);return $.set(e,a),a}var E,ne=function(){function e(t){k()(this,e),d()(this,"active",!0),d()(this,"deps",[]),d()(this,"parent",void 0),d()(this,"fn",void 0),this.fn=t}return A()(e,[{key:"run",value:function(){E=this,this.fn(),E=void 0}},{key:"stop",value:function(){re(this)}}]),e}();function re(e){var t=e.deps;if(t.length){for(var n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var W=new WeakMap;function ae(e,t){if(E){var n=W.get(e);n||W.set(e,n=new Map);var a=n.get(t);a||n.set(t,a=ie()),se(a)}}function se(e){e.add(E),E.deps.push(e)}function ie(e){var t=new Set(e);return t}function ue(e){var t=new ne(e);return t.run(),t}function fe(e,t){var n=W.get(e);if(n){var a=[];t!==void 0&&a.push(n.get(t)),a.forEach(function(s){oe(s)})}}function oe(e){if(e){var t=ee()(e),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.run()}}catch(s){t.e(s)}finally{t.f()}}}var ce=f(97857),Q=f.n(ce),le=f(5574),ve=f.n(le),N,j,B,P;function me(e){N=e.useState,j=e.useEffect,B=e.requestAnimationFrame,P=e.cancelAnimationFrame}function We(e){var t=e;return t=reactive(t),t}function Pe(e){return{current:e}}function Oe(e){return{current:e}}function he(e,t){var n=O(e,t,!1),a=ve()(n,2),s=a[0],r=a[1];return s(),r}function Re(e,t){var n=O(e,t,!0),a=_slicedToArray(n,2),s=a[0],r=a[1];return s(),r}function De(e){var t=N(e),n=_slicedToArray(t,2),a=n[1],s=O(e,a,!1),r=_slicedToArray(s,2),i=r[0],l=r[1];j(function(){return i(),l},[])}function O(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a,s=!0,r=0,i=function(){s?(G(e),s=!1):(P(r),n?t(Q()({},e)):r=B(function(){t(Q()({},e))}))};function l(){a=de(i)}function m(){P(r),pe(a)}return[l,m]}function G(e){if(C()(e)=="object")for(var t in e)G(e[t])}function de(e){var t=ue(e);return t}function pe(e){e.stop()}var U,R,b=function(){function e(){var t=this;k()(this,e),d()(this,"state",{}),d()(this,"items",[]),d()(this,"taskQuene",new V),d()(this,"lastUpdate",void 0),this.state=L({name:"",startTime:0,currentTime:0,endTime:0,speed:1,isPlaying:!1,isLoading:!1}),he(this.state,function(n){x({"ros/state":t.state})}),this.loop()}return A()(e,[{key:"readFile",value:function(){var t=y()(c()().mark(function a(s){var r=this;return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,e.init();case 2:this.taskQuene.addTask(y()(c()().mark(function m(){var p;return c()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return console.time("load_"+s.name),r.state.isLoading=!0,r.state.name=s.name,p=new ge,S.next=6,p.read(s);case 6:r.state.startTime==0?r.state.startTime=p.startTime:r.state.startTime=Math.min(r.state.startTime,p.startTime),r.state.endTime==0?r.state.endTime=p.endTime:r.state.endTime=Math.min(r.state.endTime,p.endTime),r.state.currentTime<r.state.startTime?r.state.currentTime=r.state.startTime:r.state.currentTime>r.state.endTime&&(r.state.currentTime=r.state.endTime),console.timeEnd("load_"+s.name),r.items.push(p),r.state.isLoading=!1;case 12:case"end":return S.stop()}},m)})));case 3:case"end":return l.stop()}},a,this)}));function n(a){return t.apply(this,arguments)}return n}()},{key:"loop",value:function(){var n=this,a=Z.getTimestamp();this.update(),this.lastUpdate=a,setTimeout(function(){n.loop()},16)}},{key:"update",value:function(){this.state.isPlaying&&this.setCurrentTime(this.state.currentTime+.1*this.state.speed)}},{key:"startPlay",value:function(){this.state.isPlaying=!0}},{key:"pause",value:function(){this.state.isPlaying=!1}},{key:"setSpeed",value:function(n){this.state.speed=n}},{key:"setCurrentTime",value:function(n){if(!(n<this.state.startTime||n>this.state.endTime)){this.state.currentTime=n;for(var a=this.state.currentTime-.1,s=this.state.currentTime,r=0;r<this.items.length;r++){var i=this.items[r].readFrameData(a,s);x({"ros/message":i})}}}},{key:"stepBackward",value:function(){this.setCurrentTime(this.state.currentTime-.1)}},{key:"stepForward",value:function(){this.setCurrentTime(this.state.currentTime+.1)}}],[{key:"init",value:function(){var t=y()(c()().mark(function a(){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,X()();case 2:U=r.sent;case 3:case"end":return r.stop()}},a)}));function n(){return t.apply(this,arguments)}return n}()},{key:"create",value:function(){return R||(R=new e),R}}]),e}(),ge=function(){function e(){k()(this,e),d()(this,"reader",void 0),d()(this,"startTime",0),d()(this,"endTime",0),d()(this,"database",void 0)}return A()(e,[{key:"read",value:function(){var t=y()(c()().mark(function a(s){var r,i,l,m;return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.load(s);case 2:return r=g.sent,this.database=new U.Database(new Uint8Array(r)),g.next=6,this.getStartEnd();case 6:i=g.sent,l=i.startTime,m=i.endTime,this.startTime=l/1e9,this.endTime=m/1e9;case 11:case"end":return g.stop()}},a,this)}));function n(a){return t.apply(this,arguments)}return n}()},{key:"load",value:function(){var t=y()(c()().mark(function a(s){var r;return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=new FileReader,l.abrupt("return",new Promise(function(m,p){r.readAsArrayBuffer(s),r.addEventListener("load",function(g){var S=g.target.result;m(S)})}));case 2:case"end":return l.stop()}},a)}));function n(a){return t.apply(this,arguments)}return n}()},{key:"singleQuery",value:function(n){var a=this.query(n);return a[0]}},{key:"query",value:function(n){for(var a=this.database.exec(n),s=[],r=0;r<a.length;r++){var i=new ye;i.columns=a[r].columns,i.value=a[r].values,s.push(i)}return s}},{key:"getStartEnd",value:function(){var n=`select timestamp from messages order by timestamp limit 1;
        select timestamp from messages order by timestamp Desc limit 1;`,a=this.query(n),s=a[0].get("timestamp")[0].timestamp,r=a[1].get("timestamp")[0].timestamp;return{startTime:s,endTime:r}}},{key:"readFrameData",value:function(n,a){var s=`select topics.name,topics.type,messages.timestamp,messages.data from topics,messages 
        where messages.topic_id=topics.id and messages.timestamp <= `.concat(a*1e9,`
        and messages.timestamp > `).concat(n*1e9," order by timestamp;"),r=this.singleQuery(s);return r.get("*")}}]),e}(),ye=function(){function e(){k()(this,e),d()(this,"columns",void 0),d()(this,"value",void 0)}return A()(e,[{key:"get",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"*",s=[];if(a=="*")this.columns.forEach(function(l,m){s.push(m)});else{var r=a.split(",");r.forEach(function(l){l=Te(l);var m=n.columns.indexOf(l);m>=0&&s.push(m)})}var i=[];return s.length<=0||this.value.map(function(l){for(var m={},p=0;p<s.length;p++){var g=s[p],S=n.columns[g],Ce=l[g];m[S]=Ce}i.push(m)}),i}}]),e}();function Te(e){return e.replace(/^\s+|\s+$/g,"")}function q(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e===null)return null;if(C()(e)!=="object")return e;if(t.has(e))return t.get(e);if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);var n=Array.isArray(e)?[]:{};t.set(e,n);for(var a in e)e.hasOwnProperty(a)&&(n[a]=q(e[a],t));return n}function we(e,t){if(_typeof(e)!=="object"||e===null||_typeof(t)!=="object"||t===null)return e;for(var n=0,a=Object.keys(t);n<a.length;n++){var s=a[n],r=t[s],i=e[s];_typeof(r)==="object"&&r!==null?((_typeof(i)!=="object"||i===null)&&(e[s]=Array.isArray(r)?[]:{}),we(e[s],r)):e[s]=r}return e}function ke(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["children"];if(e===t)return!0;if(_typeof(e)=="object"&&e!=null&&_typeof(t)=="object"&&t!=null){for(var a in e)if(n.indexOf(a)==-1&&!ke(e[a],t[a]))return!1;for(var a in t)if(n.indexOf(a)==-1&&!e.hasOwnProperty(a))return!1;return!0}else return!1}function xe(e){}J();function J(){setTimeout(function(){J()},33)}function Ie(){}var Se=function(t){return setTimeout(t,0)},Fe=function(t){clearTimeout(t)},Ae=function(){},Ee=function(){};me({useState:Ae,useEffect:Ee,requestAnimationFrame:Se,cancelAnimationFrame:Fe});var D,be={init:function(t){D=t},"/ros/readFile":function(t){var n=b.create();n.readFile(t)},"/ros/startPlay":function(){var t=b.create();t.startPlay()},"/ros/pause":function(){var t=b.create();t.pause()},"/ros/setSpeed":function(t){var n=b.create();n.setSpeed(t)},"/ros/setCurrentTime":function(t){var n=b.create();n.setCurrentTime(t)}},Y={};function x(e){var t;(t=D)===null||t===void 0||t.sync(q(e))}function He(){var e;(e=D)===null||e===void 0||e.sync(deepClone(Y)),Y={}}(0,F.Jj)(be)},80950:function(){},46601:function(){},89214:function(){},96419:function(){},56353:function(){},8623:function(){},7748:function(){},85568:function(){},56619:function(){},77108:function(){},70803:function(){},69862:function(){},40964:function(){}},H={};function o(u){var v=H[u];if(v!==void 0)return v.exports;var f=H[u]={id:u,loaded:!1,exports:{}};return I[u].call(f.exports,f,f.exports,o),f.loaded=!0,f.exports}o.m=I,o.x=function(){var u=o.O(void 0,[202],function(){return o(6070)});return u=o.O(u),u},function(){var u=[];o.O=function(v,f,F,h){if(f){h=h||0;for(var c=u.length;c>0&&u[c-1][2]>h;c--)u[c]=u[c-1];u[c]=[f,F,h];return}for(var w=1/0,c=0;c<u.length;c++){for(var f=u[c][0],F=u[c][1],h=u[c][2],y=!0,T=0;T<f.length;T++)(h&!1||w>=h)&&Object.keys(o.O).every(function(M){return o.O[M](f[T])})?f.splice(T--,1):(y=!1,h<w&&(w=h));if(y){u.splice(c--,1);var k=F();k!==void 0&&(v=k)}}return v}}(),function(){o.n=function(u){var v=u&&u.__esModule?function(){return u.default}:function(){return u};return o.d(v,{a:v}),v}}(),function(){o.d=function(u,v){for(var f in v)o.o(v,f)&&!o.o(u,f)&&Object.defineProperty(u,f,{enumerable:!0,get:v[f]})}}(),function(){o.f={},o.e=function(u){return Promise.all(Object.keys(o.f).reduce(function(v,f){return o.f[f](u,v),v},[]))}}(),function(){o.u=function(u){return""+u+".f25174bc.async.js"}}(),function(){o.miniCssF=function(u){}}(),function(){o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(u){if(typeof window=="object")return window}}()}(),function(){o.o=function(u,v){return Object.prototype.hasOwnProperty.call(u,v)}}(),function(){o.nmd=function(u){return u.paths=[],u.children||(u.children=[]),u}}(),function(){o.p="/oss/"}(),function(){var u={942:1},v=function(h){var c=h[0],w=h[1],y=h[2];for(var T in w)o.o(w,T)&&(o.m[T]=w[T]);for(y&&y(o);c.length;)u[c.pop()]=1;F(h)};o.f.i=function(h,c){u[h]||importScripts(o.p+o.u(h))};var f=self.webpackChunk=self.webpackChunk||[],F=f.push.bind(f);f.push=v}(),function(){var u=o.x;o.x=function(){return o.e(202).then(u)}}();var Me=o.x()})();
